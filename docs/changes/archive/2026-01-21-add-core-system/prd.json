{
  "name": "Core system",
  "description": "Shared shell with auth, navigation, settings, module registry, and widgets.",
  "branchName": "ralph/add-core-system",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define provider contracts",
      "description": "As a developer, I want contracts for auth, user profiles, and module variables so the shell can be wired consistently.",
      "acceptanceCriteria": [
        "Auth provider contract includes session read plus sign-in and sign-out",
        "User profile provider contract reads and writes email, name, and picture",
        "Module variables provider contract supports get/set and allowlisted cross-module reads",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "",
      "dependsOn": [],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-006",
      "title": "Define module types and base registry",
      "description": "As a developer, I want a module definition that can register nav, settings, and widgets.",
      "acceptanceCriteria": [
        "Module definition includes id, label, navigation entries, settings sections, and widgets",
        "Registry stores module definitions keyed by id",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "",
      "dependsOn": [],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-002",
      "title": "Implement mock auth provider",
      "description": "As a developer, I want local auth so the app works without real services.",
      "acceptanceCriteria": [
        "Mock sign-in returns a local test user and sets a session",
        "Mock sign-out clears the session",
        "Session read returns the current session or null",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-001"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-005",
      "title": "Add provider selection config",
      "description": "As a developer, I want a single place to select mock or real providers.",
      "acceptanceCriteria": [
        "Provider registry wires auth, profile, and module variables",
        "Default configuration uses mock providers when none are supplied",
        "Config allows switching to real providers later",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-002",
        "US-003",
        "US-004"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-007",
      "title": "Add module enablement config",
      "description": "As a developer, I want modules loaded only when enabled by instance config.",
      "acceptanceCriteria": [
        "Instance config lists enabled module ids",
        "Registry loads enabled modules at startup",
        "Disabled modules are not loaded",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-006"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-009",
      "title": "Add login screen",
      "description": "As a user, I want a simple login screen that signs me in locally.",
      "acceptanceCriteria": [
        "Login screen renders a sign-in action",
        "Sign-in uses the provider registry auth provider so config selection is honored",
        "Sign-in updates session state",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: login screen renders and sign-in runs"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Issue: R1",
      "dependsOn": [
        "US-005"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-010",
      "title": "Add auth gate and shell routes",
      "description": "As a user, I want the shell to show only after sign-in.",
      "acceptanceCriteria": [
        "Unauthenticated users see the login screen",
        "Authenticated users see the shell with dashboard and settings routes",
        "Shell loads dashboard by default",
        "Session provider reads existing auth session and clears loading state before gating",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: login gates the shell and dashboard loads"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Issue: R2",
      "dependsOn": [
        "US-009",
        "US-005"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-003",
      "title": "Implement mock user profile provider",
      "description": "As a developer, I want local profile storage for name and email.",
      "acceptanceCriteria": [
        "Mock profile storage saves and reads email, name, and picture",
        "Profile read returns the latest stored values",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-001"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-004",
      "title": "Implement mock module variables provider",
      "description": "As a developer, I want local module variable storage with allowlisted sharing.",
      "acceptanceCriteria": [
        "Module variables persist locally and return the latest value on read",
        "Variables are keyed by module id and variable key",
        "Allowlisted cross-module reads return the shared value",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-001"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-008",
      "title": "Expose module registry selectors",
      "description": "As a developer, I want helpers that return nav entries, settings sections, and widgets.",
      "acceptanceCriteria": [
        "Registry exposes navigation entries for enabled modules",
        "Registry exposes settings sections for enabled modules",
        "Registry exposes dashboard widgets for enabled modules",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-006",
        "US-007"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-012",
      "title": "Render desktop sidebar navigation",
      "description": "As a user, I want a desktop sidebar that lists module navigation entries.",
      "acceptanceCriteria": [
        "Desktop layout shows a sidebar with module navigation entries",
        "Desktop layout renders the active tab content alongside the sidebar",
        "Modules without navigation entries do not appear",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: sidebar renders module links on desktop width"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Issue: R4",
      "dependsOn": [
        "US-008",
        "US-010"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-013",
      "title": "Render mobile bottom tabs and more menu",
      "description": "As a user, I want mobile navigation via bottom tabs with a more menu.",
      "acceptanceCriteria": [
        "Mobile layout shows bottom tabs for primary navigation entries without restricting routes to index/settings",
        "Primary navigation supports module entries that target '/(tabs)' or '/(tabs)/index' and maps them to the index tab",
        "More menu shows additional entries with a working route",
        "Modules without navigation entries do not appear",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: tabs render on mobile width and more menu opens"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Issue: R5",
      "dependsOn": [
        "US-008",
        "US-010"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-014",
      "title": "Add settings shell and access section",
      "description": "As a user, I want a shared settings screen with a user access section.",
      "acceptanceCriteria": [
        "Settings screen includes a user access section (placeholder ok)",
        "Settings screen is reachable from the shell",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: settings screen renders"
      ],
      "priority": 2,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-010"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-017",
      "title": "Render dashboard widgets and empty state",
      "description": "As a user, I want the dashboard to show widgets or an empty state.",
      "acceptanceCriteria": [
        "Dashboard renders widgets provided by enabled modules",
        "Dashboard shows a no-widgets state when none exist",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: dashboard renders widgets or empty state"
      ],
      "priority": 2,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-010",
        "US-008"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-011",
      "title": "Add sign-out action",
      "description": "As a user, I want to sign out and return to the login screen.",
      "acceptanceCriteria": [
        "Sign-out action uses the provider registry auth provider",
        "Session clears and login screen appears",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: sign-out returns to login"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Issue: R1",
      "dependsOn": [
        "US-010"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-015",
      "title": "Render module settings sections",
      "description": "As a user, I want module settings sections to appear in shared settings.",
      "acceptanceCriteria": [
        "Settings renders module sections from the module registry settings section list",
        "Settings renders module sections with custom titles",
        "Settings renders module sections with icon + slug metadata and their registered UI component",
        "Module settings definitions include a renderable UI component reference",
        "Settings screen renders each module section's UI component",
        "Multiple module sections render separately",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: module settings sections render"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Issue: R3",
      "dependsOn": [
        "US-014",
        "US-008"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-016",
      "title": "Add module variables editor",
      "description": "As a user, I want to read and update module variables from settings.",
      "acceptanceCriteria": [
        "Module variables can be read and updated from settings",
        "Updates persist via the module variables provider",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: variable updates persist"
      ],
      "priority": 3,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-014",
        "US-004"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-018",
      "title": "Add activity module mock widgets",
      "description": "As a user, I want mock activity widgets for expenses and income trends.",
      "acceptanceCriteria": [
        "Activity module registers widgets for expenses by top-level category",
        "Activity module registers widgets for actual expenses vs income",
        "Widgets use mock data for now",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes",
        "Verify in app or web: activity widgets render with mock data"
      ],
      "priority": 4,
      "passes": true,
      "notes": "",
      "dependsOn": [
        "US-006",
        "US-017"
      ],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-019",
      "title": "Fix: Stabilize mobile core test mapping",
      "description": "As a developer, I want mobile tests to resolve @openfinance/core without relying on a prebuilt dist so tests stay reliable.",
      "acceptanceCriteria": [
        "Jest resolves @openfinance/core from source or runs a build step before tests",
        "pnpm lint passes",
        "pnpm test passes",
        "pnpm build passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Issue: R6",
      "dependsOn": [],
      "completionNotes": "Completed by agent"
    }
  ],
  "metadata": {
    "updatedAt": "2026-01-21T05:28:36.099Z"
  }
}